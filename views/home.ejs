<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./partials/head') %>
  <title>BlogX - Share Your Story</title>
</head>
<body>
  <div class="bg-animation">
    <div class="bg-animation-overlay"></div>
  </div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>
  <div class="particle"></div>

  <%- include('./partials/nav') %>

  <section class="hero" id="home">
    <div class="hero-content">
      <h1>Increase your Business with BlogX</h1>
      <p>Share your thoughts, stories, and ideas with the world.</p>
      <% if (locals.user) { %>
        <a href="/blog/add-new" class="btn btn-primary">Write a Blog</a>
      <% } else { %>
        <a href="/user/signup" class="btn btn-primary">Join BlogX Today</a>
      <% } %>
    </div>
  </section>

  <section class="blog-section">
    <h2 class="section-title">Latest Blog Posts</h2>

    <% if (blogs && blogs.length > 0) { %>
      <div class="blog-grid">
        <% blogs.forEach(blog => { %>
          <article class="blog-card">
            <% if (blog.coverImageURL) { %>
              <img src="<%= blog.coverImageURL %>" alt="<%= blog.title %>" />
            <% } %>
            <h3><%= blog.title %></h3>
            <p><%= blog.body.length > 160 ? blog.body.substring(0, 160) + '…' : blog.body %></p>
            <div class="blog-meta">
              <span>By <%= blog.createdBy?.fullName || 'Anonymous' %></span>
              <span><%= new Date(blog.createdAt).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
              }) %></span>
            </div>
            <a href="/blog/<%= blog._id %>" class="btn btn-secondary">Read More</a>
          </article>
        <% }) %>
      </div>
    <% } else { %>
      <div class="empty-state">
        <h2>No blog posts yet!</h2>
        <p>Be the first to share your thoughts with the world.</p>
        <% if (locals.user) { %>
          <a href="/blog/add-new" class="btn btn-secondary">Write Your First Post</a>
        <% } else { %>
          <a href="/user/signup" class="btn btn-secondary">Sign Up to Write</a>
        <% } %>
      </div>
    <% } %>
  </section>

  <% if (locals.user) { %>
    <a href="/blog/add-new" class="fab" title="Create new blog">✍️</a>
  <% } else { %>
    <a href="/user/signup" class="fab" title="Join BlogX">✨</a>
  <% } %>

  <%- include('./partials/scripts') %>
</body>
</html>
